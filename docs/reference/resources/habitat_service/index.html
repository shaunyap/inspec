<!DOCTYPE html><html><head><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" /><link href="/favicon.png" rel="icon" type="image/png" /><link href="/favicon.ico" rel="icon" /><title>About the habitat_service Resource</title><meta name="description" /><link href="/css/inspec_tutorial.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/vendor/fontawesome.min.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/site.css" rel="stylesheet" /></head><body class="docs docs_reference docs_reference_resources docs_reference_resources_habitat_service docs_reference_resources_habitat_service_index"><script>gm_session_id = 'inspecGlobalMessage8';</script><div class="container"><nav class="shadow" id="main-nav"><progress value="0"></progress><div id="main-nav-ctas"><a class="main-nav--logo" href="/"><img alt="logo for Chef InSpec" onerror="this.src='/images/inspec-by-chef-logo.png'" src="/images/inspec-by-chef-logo.svg" /></a><i class="fa fa-bars main-nav--toggle strict-right mobile-show"></i><ul class="main-nav--links"><li class="main-nav--link"><a href="/tutorials" class="link " <span class="main-nav--link-text">Tutorials</span></a></li><li class="main-nav--link"><a href="/docs" class="link " <span class="main-nav--link-text">Docs</span></a></li><li class="main-nav--link"><a href="/community" class="link " <span class="main-nav--link-text">Community</span></a></li><li class="main-nav--link"><a class="link" href="https://github.com/chef/inspec"><i class="fa fa-github"></i><span class="main-nav--link-text">Github</span></a></li><li class="nav-cta"><a class="button btn-sm btn-purple" href="/downloads"><i class="fa fa-cloud-download"></i>Download</a></li></ul></div></nav><main id="main-content"><!--header search--><header class="bg-gradient margin-top-offset relative"><div class="row"><div class="columns large-12 medium-12 z-20"><div class="flex align margin-both"><form action="/docs/search/" class="main-sidebar--search shadow-dark" method="get"><input class="st-default-search-input" name="q" placeholder="Search documentation..." type="text" /></form><button action="/docs/search/" class="search shadow-dark margin-left-xs" method="get"><i class="fa fa-search t-white"></i></button></div></div></div><div id="particles-second"><canvas class="particles-js-canvas-el" /></div></header><div class="row margin-both relative"><column class="columns large-3 medium-3 mobile-hide" id="sidebar"><ul class="main-sidebar--links"><li class="main-sidebar--link"><small>Getting Started</small><ul class="main-sidebar--list no-bullet"><li class="main-sidebar--list--item--a"><a href="/docs">Overview</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/downloads">Get Chef InSpec</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/platforms">Chef InSpec for the cloud</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/tutorials">Tutorials</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/inspec_and_friends">Chef InSpec and friends</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/glossary">Chef InSpec Glossary</a><i class="fa fa-angle-double-right focus strict-right"></i></li></ul></li><li class="main-sidebar--link"><small>Reference</small><ul class="main-sidebar--list no-bullet"><li class="main-sidebar--list--item--a"><a href="/docs/reference/cli">inspec executable</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/profiles">Profiles</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/resources">Resources</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/inputs">Inputs</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/matchers">Matchers</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/reporters">Reporters</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/config">Configuration</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/dsl_inspec">Chef InSpec DSL</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/style">Profile Style guide</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/dsl_resource">Custom Resources</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/plugins">Plugins</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/plugin_kitchen_inspec">kitchen-inspec</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/shell">inspec shell</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/habitat">Chef Habitat Integration</a><i class="fa fa-angle-double-right focus strict-right"></i></li><li class="main-sidebar--list--item--a"><a href="/docs/reference/migration">Migration from Serverspec</a><i class="fa fa-angle-double-right focus strict-right"></i></li></ul></li></ul></column><column class="columns large-9 medium-9 mobile-12" id="mainbar"><h1 id="habitat_service">habitat_service</h1>

<p>Use the <code>habitat_service</code> InSpec audit resource to test properties of a single Habitat service.</p>

<h2 id="availability">Availability</h2>

<h3 id="status-experimental">Status: EXPERIMENTAL</h3>

<p>This resource, like all of the inspec-habitat resource pack, is in the early stages of research and development. Functionality may be defective, incomplete, or be withdrawn in the future. If you are interested in helping this project mature, please join the conversation or contribute code at the <a href="https://github.com/inspec/inspec-habitat">inspec-habitat project</a>.</p>

<h3 id="connecting-to-habitat">Connecting to Habitat</h3>

<p>To configure <code>inspec</code> to be able to communicate with Chef Habitat, be sure <a href="https://github.com/inspec/inspec-habitat#configuring-inspec-to-reach-habitat">to follow the instructions</a> regarding configuring the connection options. This will prevent &lsquo;unsupported platform&rsquo; errors.</p>

<h2 id="examples">Examples</h2>

<h3 id="check-for-core-httpd-service">Check for core/httpd service</h3>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span>                     <span class="p">{</span> <span class="n">should</span> <span class="n">exist</span> <span class="p">}</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'version'</span><span class="p">)</span>         <span class="p">{</span> <span class="n">should</span> <span class="n">eq</span> <span class="s1">'2.4.35'</span><span class="p">}</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'topology'</span><span class="p">)</span>        <span class="p">{</span> <span class="n">should</span> <span class="n">eq</span> <span class="s1">'standalone'</span> <span class="p">}</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'update_strategy'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">eq</span> <span class="s1">'none'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="limitations">Limitations</h2>

<h3 id="api-versus-cli-access">API versus CLI access</h3>

<p>Habitat exposes certain data via the CLI, and other data via the HTTP Gateway API. To enjoy the full functionality of this resource, use a set of credentials that includes the API. Limited data is available by CLI. See the <a href="https://github.com/inspec/train-habitat">train-habitat</a> documentation for more details.</p>

<p>If you use the CLI interface without the API, unavailable properties will behave as if the resource was not found (see below).</p>

<h3 id="behavior-when-not-found">Behavior when not found</h3>

<p>If the service is not found, then this resource behaves as follows:</p>

<ul>
<li><code>it { should exist }</code> will be a failing test. Check this test if you are unsure if the resource will exist; it is guaranteed to be reliable in the future.</li>
<li><code>name</code> and <code>origin</code> will continue to return their values as set in the resource parameters. This allows output messaging to refer to the missing service clearly.</li>
<li>All other single-value properties will return nil.</li>
<li>All array and hash-valued properties will return empty objects.</li>
<li>All matchers will return false.</li>
</ul>

<h2 id="availability">Availability</h2>

<h3 id="installation">Installation</h3>

<p>This resource is in the <code>inspec-habitat</code> resource pack. You can use the resource by setting an InSpec profile dependency on the resource pack. See <a href="https://github.com/inspec/inspec-habitat#installation">inspec-habitat instructions</a></p>

<h3 id="version">Version</h3>

<p>This resource was first available in version 0.1.0 of the resource pack.</p>

<h2 id="resource-parameters">Resource Parameters</h2>

<p>Use <a href="https://www.inspec.io/docs/reference/glossary/#resource-parameter">resource parameters</a> to identify the particular service you wish to test.</p>

<h3 id="origin">origin</h3>

<p>Required string. The name of the <code>origin</code> (distribution facility) of the package that provides the service.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># Most common origin is 'core', publicly distributed packages created by Chef</span>
<span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">exist</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Your company might run a private origin</span>
<span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'mycorp'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'secret-sauce'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">exist</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="name">name</h3>

<p>Required string. The name (unique within the namespace of the origin) of the package that provides the service.</p>
<div class="highlight"><pre class="highlight ruby"><code>
<span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">exist</span> <span class="p">}</span>
<span class="k">end</span>

</code></pre></div>
<h2 id="properties">Properties</h2>

<p>Use <a href="https://www.inspec.io/docs/reference/glossary/#property">properties</a> to create tests that compare an expected value to the actual value.</p>

<h3 id="dependency_names">dependency_names</h3>

<p>Array of strings. A list of the packages that this service depends on, in the form of <code>dep_origin/dep_name</code>. This property does not contain version information; see <code>dependency_ids</code> for that.</p>

<p>Requires API connection; not available via CLI.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'dependency_names'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="kp">include</span> <span class="s1">'core/pcre'</span> <span class="p">}</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'dependency_names'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should_not</span> <span class="kp">include</span> <span class="s1">'core/nginx'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="dependency_ids">dependency_ids</h3>

<p>Array of strings. A list of the packages that this service depends on, in the form of <code>dep_origin/dep_name/1.2.3/20190325123456</code>. This value may be difficult to compare, because the version identifier (<code>1.2.3</code>, the third component) may be formatted in any way the maintainer of the project chooses; they need not be of the form <code>1.2.3</code>.</p>

<p>Requires API connection; not available via CLI.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="c1"># Suppose this version was unwanted, for example</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'dependency_names'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should_not</span> <span class="kp">include</span> <span class="s1">'core/pcre/8.42/20190115012526'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="name">name</h3>

<p>The name of the service, as passed in via the resource parameter. Always available, even if the resource was not found. See also <a href="#origin">origin</a> and <a href="#version">version</a>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">cmp</span> <span class="s1">'httpd'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="origin">origin</h3>

<p>The origin name of the service, as passed in via the resource parameter. Always available, even if the resource was not found. See also <a href="#name">name</a> and <a href="#version">version</a>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'origin'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">cmp</span> <span class="s1">'core'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="pkg_id">pkg_id</h3>

<p>String. The full package identifier of the package that supports the service, in the form <code>origin/name/version/release</code>.  See also <a href="#name">name</a> and <a href="#version">version</a>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'pkg_id'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">cmp</span> <span class="s1">'core/httpd/2.4.35/20190307151146'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="release">release</h3>

<p>String. The release number of the package that supports the service, as assigned by the packager. These values are always strings, but are 14-digit timestamps. See also <a href="#version">version</a>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'release'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be</span> <span class="o">&gt;=</span> <span class="s1">'20190307151146'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="version">version</h3>

<p>The version of the package that supports the service, as assigned by the maintainer of the package project.  While many versions are of the 3-digit form, there is no set rule, and exceptions are common. See also <a href="#release">release</a>.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">its</span><span class="p">(</span><span class="s1">'version'</span><span class="p">)</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be</span> <span class="o">&gt;=</span>  <span class="s1">'2.2'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="matchers">Matchers</h2>

<p>Use <a href="https://www.inspec.io/docs/reference/glossary/#matcher">matchers</a> to create tests that test a true or false question.</p>

<p>InSpec includes a number of <a href="https://www.inspec.io/docs/reference/matchers/">universal matchers</a>. See below for matchers specific to this resource.</p>

<h3 id="havestandalonetopology">have<em>standalone</em>topology</h3>

<p>This matcher returns <code>true</code> if the service is configured in a <a href="https://www.habitat.sh/docs/using-habitat/#standalone"><code>standalone</code></a> topology.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_standalone_topology</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="haveleaderfollower_topology">have<em>leader</em>follower_topology</h3>

<p>This matcher returns <code>true</code> if the service is configured in a <a href="https://www.habitat.sh/docs/using-habitat/#leader-follower-topology"><code>leader-follower</code></a> topology.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'httpd'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_leader_follower_topology</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="beupdatedby_none">be<em>updated</em>by_none</h3>

<p>This matcher returns <code>true</code> if the update strategy for the service is <a href="https://www.habitat.sh/docs/using-habitat/#none-strategy"><code>none</code></a>.</p>

<p>Requires API connection; not available via CLI.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'postgresql'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_updated_by_none</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="beupdatedby_rolling">be<em>updated</em>by_rolling</h3>

<p>This matcher returns <code>true</code> if the update strategy for the service is <a href="https://www.habitat.sh/docs/using-habitat/#rolling-strategy"><code>rolling</code></a>.</p>

<p>Requires API connection; not available via CLI.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'postgresql'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_updated_by_rolling</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="beupdatedat_once">be<em>updated</em>at_once</h3>

<p>This matcher returns <code>true</code> if the update strategy for the service is <a href="https://www.habitat.sh/docs/using-habitat/#at-once-strategy"><code>at once</code></a>.</p>

<p>Requires API connection; not available via CLI.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="n">habitat_service</span><span class="p">(</span><span class="ss">origin: </span><span class="s1">'core'</span><span class="p">,</span> <span class="ss">name: </span><span class="s1">'nginx'</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_updated_at_once</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></column><div class="scrollToTop shadow-dark"><img id="scrollup" onerror="this.src='/images/home/arrow.png'" src="/images/home/arrow.svg" /></div></div><script>// Swiftype JS code snippet
(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','xzyJV6P7pgscygGyyTm8','2.0.0');
// end Swiftype code snippet

document.getElementsByClassName("st-default-search-input")[0].focus();</script></main></div><footer class="dark-bg" id="main-footer"><div class="strict-center" id="dlmsg"><div class="pad-under-xs"><img alt="image of octagon spinning" id="hex" onerror="this.src='/images/octagon.png'" src="/images/octagon.svg" /></div><h3 class="t-white pad-under-xs">Get started with Chef InSpec and rock on.</h3><div class="row align columns"><div class="strict-center"><a class="button btn-lg btn-purple shadow-dark margin-right-xs mobile-row-btn" href="/downloads"><i class="fa fa-cloud-download"></i><span>download InSpec 4</span></a><a class="button btn-lg btn-white-o shadow-dark mobile-row-btn" href="/tutorials">browse tutorials</a></div></div></div><div class="flex align"><div class="columns large-4 medium-4 mobile-hide"><ul class="footer--logos"><li><a class="footer--logo inspec" href="/"><img alt="logo for Chef InSpec" src="/images/inspec-by-chef-logo.png" /></a></li><li><a class="footer--logo chef" href="https://www.chef.io"><img alt="logo for Chef Software" src="/images/chef-logo.png" /></a></li></ul></div><div class="columns large-8 medium-8"><ul class="footer--links strict-right"><li><a class="link footer--link" href="https://docs.chef.io/chef_license.html">Licensing</a></li><li><a class="link footer--link" href="https://www.chef.io/terms-of-service/">Terms &amp; Conditions</a></li><li><a class="link footer--link" href="https://www.chef.io/trademark-policy/">Trademark Policy</a></li><li><a class="link footer--link" href="https://www.chef.io/privacy-policy/">Privacy Policy</a></li><li><a class="link footer--link" href="https://www.chef.io/cookie-policy/">Cookie Policy</a></li></ul><div class="columns margin-both-xs mobile-show"><ul class="footer--logos"><li><a class="footer--logo inspec" href="/"><img alt="logo for Chef InSpec" src="/images/inspec-by-chef-logo.png" /></a></li><li><a class="footer--logo chef" href="http://www.chef.io"><img alt="logo for Chef Software" src="/images/chef-logo.png" /></a></li></ul></div></div></div><p class="strict-center pad-under-xs"><small class="t-gray">&copy; Chef Software 2015-2019</small></p></footer><script src="https://buttons.github.io/buttons.js"></script><script src="/scripts/inspec_tutorial.js"></script><script src="/dist/inspec_tutorial.js"></script><script src="/javascripts/vendor/jquery.min.js"></script><script src="https://s3.amazonaws.com/menumaker/menumaker.min.js"></script><div class="inspec-tutorial" hidden="true" inspec-tutorial="true">Loading</div><script src="/javascripts/all.js"></script><script>function initSlideGroup(group) {
  var prev = -1;
  var links = $(group).find('a')

  links.click(function(e) {
    e.stopPropagation()

    links.removeClass('selected')
    $(this).addClass('selected')

    var idx = $(this).index();
    if(prev == idx) return;
    prev = idx;

    $('.slider .view.slide-in').removeClass('slide-in').addClass('slide-out')
    var el = $('.slider .view')[idx]
    if(el == null) {
      console.log("No element for slider index "+idx)
      return
    }

    $(el).removeClass('slide-out').removeClass('hidden').addClass('slide-in')
  })

  if(links[0] != null) links[0].click();
}

function initSliders() {
  $('.slider .view').addClass('hidden')
  var groups = $('.slider .selectors')
  groups.each(function(idx){
    initSlideGroup(this)
  })
}

//run code colors

$(document).ready(function() {
  initSliders()
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});

//copy to clipboard

function copyToClipboard(element) {
  var $temp = $("<input>");
  $("body").append($temp);
  $temp.val($(element).text()).select();
  document.execCommand("copy");
  $temp.remove();
}

$('#copy').hover(function() {
   $('#install').toggleClass("text-focus");
});

$('#copy').click(function() {
   $(this).removeClass("fa-copy");
   $(this).addClass("fa-check");

 setTimeout(() => {
   $(this).removeClass('fa-check').addClass('fa-copy');
  }, 1500);
});

// homepage content slider

$(function() {
  $("#expand").hide();
  $("#expandBtn").html("Show all new InSpec 4 features");

   $('#expandBtn').click(function() {
      $('#expand').slideToggle("fast");
      $(this).html($(this).html() == 'Collapse new InSpec 4 features' ? 'Show all new InSpec 4 features' : 'Collapse new InSpec 4 features');
   });
});

// tutorial content slider

$(function() {
  $(".collapseContent").hide();
  $(".collapsebtn").addClass("fa-plus-square");

   $('.collapseToggle').click(function() {
      var el = $(this).parent().find('.collapseContent')
      el.slideToggle("fast")
      // $('.collapseContent').slideToggle("fast");
      var btn = $(this).find('.collapsebtn')
      if(btn.hasClass('fa-minus-square')) {
        btn.addClass('fa-plus-square')
        btn.removeClass('fa-minus-square')
      } else {
        btn.addClass('fa-minus-square')
        btn.removeClass('fa-plus-square')
      }
   });
});



// scroll spy animations

var $slide_left = $('.slide-left');
var $slide_right = $('.slide-right');
var $slide_up = $('.slide-up');
var $slide_up_slow = $('.slide-up-slow');
var $window = $(window);

function check_if_in_view() {
  var window_height = $window.height();
  var window_top_position = $window.scrollTop();
  var window_bottom_position = (window_top_position + window_height);

  $.each($slide_left, function() {
    var $element = $(this);
    var element_height = $element.outerHeight();
    var element_top_position = $element.offset().top;
    var element_bottom_position = (element_top_position + element_height);

    //check to see if this current container is within viewport
    if ((element_bottom_position >= window_top_position) &&
        (element_top_position <= window_bottom_position)) {
      $element.addClass('in-view');
    } else {
      $element.removeClass('in-view');
    }
  });

  $.each($slide_right, function() {
    var $element = $(this);
    var element_height = $element.outerHeight();
    var element_top_position = $element.offset().top;
    var element_bottom_position = (element_top_position + element_height);

    //check to see if this current container is within viewport
    if ((element_bottom_position >= window_top_position) &&
        (element_top_position <= window_bottom_position)) {
      $element.addClass('in-view');
    } else {
      $element.removeClass('in-view');
    }
  });

  $.each($slide_up, function() {
    var $element = $(this);
    var element_height = $element.outerHeight();
    var element_top_position = $element.offset().top;
    var element_bottom_position = (element_top_position + element_height);

    //check to see if this current container is within viewport
    if ((element_bottom_position >= window_top_position) &&
        (element_top_position <= window_bottom_position)) {
      $element.addClass('in-view');
    } else {
      $element.removeClass('in-view');
    }
  });

  $.each($slide_up_slow, function() {
    var $element = $(this);
    var element_height = $element.outerHeight();
    var element_top_position = $element.offset().top;
    var element_bottom_position = (element_top_position + element_height);

    //check to see if this current container is within viewport
    if ((element_bottom_position >= window_top_position) &&
        (element_top_position <= window_bottom_position)) {
      $element.addClass('in-view');
    } else {
      $element.removeClass('in-view');
    }
  });
}

$window.on('scroll resize', check_if_in_view);
$window.trigger('scroll');

//scroll to top
$(document).ready(function(){

  $(window).scroll(function(){
    if ($(this).scrollTop() > 100) {
      $('.scrollToTop').fadeIn();
    } else {
      $('.scrollToTop').fadeOut();
    }
  });

  $('.scrollToTop').click(function(){
    $('html, body').animate({scrollTop : 0},800);
    return false;
  });

  // scrolling to resource sections
  $(".resources-button").click(function() {
    var dst = $(this).attr("href")
    $(".resources-button").removeClass("btn-purple").addClass("btn-purple-o")
    $(this).addClass("btn-purple").removeClass("btn-purple-o")
    $("html, body").animate({
        scrollTop: $(dst).offset().top - 105
    }, 1000);
  });

});

//scrolling code box

var div = $('#scrolled');
   setInterval(function(){
    var pos = div.scrollTop();
    div.scrollTop(pos + 2);
}, 200);

//Animating progress bar for header

$(document).ready(function(){

var getMax = function(){
    return $(document).height() - $(window).height();
}

var getValue = function(){
    return $(window).scrollTop();
}

if('max' in document.createElement('progress')){
    // Browser supports progress element
    var progressBar = $('progress');

    // Set the Max attr for the first time
    progressBar.attr({ max: getMax() });

    $(document).on('scroll', function(){
        // On scroll only Value attr needs to be calculated
        progressBar.attr({ value: getValue() });
    });

    $(window).resize(function(){
        // On resize, both Max/Value attr needs to be calculated
        progressBar.attr({ max: getMax(), value: getValue() });
    });
}
else {
    var progressBar = $('.progress-bar'),
        max = getMax(),
        value, width;

    var getWidth = function(){
        // Calculate width in percentage
        value = getValue();
        width = (value/max) * 100;
        width = width + '%';
        return width;
    }

    var setWidth = function(){
        progressBar.css({ width: getWidth() });
    }

    $(document).on('scroll', setWidth);
    $(window).on('resize', function(){
        // Need to reset the Max attr
        max = getMax();
        setWidth();
    });
    }
  });</script><script>$(document).foundation();
$('.try-demo').click(function(event){
  event.stopPropagation();
  $('.inspec-tutorial').show()
  window.dispatchEvent(new Event('resizeTerminal'));
  $('.quit-inspec-tutorial').click(function(event){
    event.stopPropagation();
    $('.inspec-tutorial').hide()
  })
});</script><script src="/javascripts/segment.js"></script></body></html>